<html><head><title>10.8. Repeat</title></head>
<body><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<table><tr width="100%"><td width=80 valign="top"><a href=doc143.html border=0><img border=0 src=../Back.tif border=0></a><a href=../index.html border=0><img border=0 src=../Home.png border=0></a><a href=doc145.html border=0><img border=0 src=../Forward.tif border=0></a></td><td valign="top"><b>10.8. Repeat</b></td></tr></table><p>
<p>
<p>The following kind of loop could if necessary be achieved just as well with a suitable &quot;while&quot;, but occurs so often that it is convenient to have a standard form. Repeat loops also have the great advantage of being certain to finish.
<p>
<blockquote><font color="#000080">repeat with my counter running from 1 to 10 begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;(phrases)
<br>end repeat;
</font></blockquote><p>
<p>
<p>This is similar to the old FOR/NEXT loop from BASIC, for those with long memories, and runs through the given phrases ten times. Within those phrases, a special value called &quot;my counter&quot; has the value 1 the first time through, then the value 2, then 3 and so on up to 10. This value exists only within the loop, so it makes no sense to talk about &quot;my counter&quot; elsewhere. (It can of course be called whatever we like: this is only an example.)
<p>
<p>The &quot;begin&quot; and &quot;end repeat&quot; are compulsory for repeat loops, in the interests of clarity.
<p>
<p>We are allowed to &quot;nest&quot; loops, that is, to put one inside another.
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('To plot a grid with size (S - a number):\n\trepeat with x running from 1 to S begin;\n\t\tsay &quot;Row [x]:&quot;;\n\t\trepeat with y running from 1 to S begin;\n\t\t\tsay &quot; [y]&quot;;\n\t\tend repeat;\n\t\tsay &quot;.&quot;;\n\tend repeat.\n\n\n')"><img border=0 src=paste.png></a> To plot a grid with size (S - a number):
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with x running from 1 to S begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;Row [x]:&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat with y running from 1 to S begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot; [y]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end repeat;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end repeat.
</font></blockquote><p>
<p>
<p>If we then write
<p>
<blockquote><font color="#000080">plot a grid with size 5
</font></blockquote><p>
<p>
<p>then the result is
<p>
<blockquote><font color="#000080">Row 1: 1 2 3 4 5.
<br>Row 2: 1 2 3 4 5.
<br>Row 3: 1 2 3 4 5.
<br>Row 4: 1 2 3 4 5.
<br>Row 5: 1 2 3 4 5.
</font></blockquote><p>
<p>
<p>Thus the innermost phrase, the say which mentions &quot;y&quot;, happens 25 times.
<p>
<p><hr><p>
<table border=0 bgcolor="#e0e0e0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a name="e112"><a href=doc144.html#e112><img border=0 src=../FlipOpen.png></a> <font color="#800000"><b>Example</b> (*).</font> <i>A lottery drum which redistributes the tickets inside whenever the player spins it.</i><p>
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('&quot;Wonka\'s Revenge&quot;\n\nThe Caribou Lodge is a room. &quot;Hundreds of expectant faces are turned your way from every table.&quot; A lottery drum is in the Lodge. &quot;Before you is the lottery drum[if we have spun the drum], ready to disgorge a ticket[otherwise], waiting to be spun[end if].&quot; In the drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket, and a ticket of pure gold. The drum is closed and openable.\n\nUnderstand &quot;spin [something]&quot; as spinning.\n\nSpinning is an action with past participle spun, applying to one thing.\n\nCheck spinning: if the noun is an open container which contains something, say &quot;[The list of things in the noun] would fly out.&quot; instead.\n\nCarry out spinning a container:\n\tshuffle the contents of the noun.\n\nReport spinning:\n\tif the noun contains something, say &quot;You rattle [if the container is transparent][the list of things in the container][otherwise]the stuff[end if] in [the noun].&quot;;\n\totherwise say &quot;Nothing results of your shaking [the noun].&quot;\n\n[Inform keeps track of the order in which things have been put into a container. If we want to change that order without the player\'s intervention, we can move the things ourselves.]\n\nTo shuffle the contents of (basket - a container):\n\tlet moves be the number of things in the basket;\n\trepeat with counter running from 1 to moves\n\tbegin;\n\t\tmove a random thing in the basket to the basket;\n\tend repeat.\n\nAfter opening the drum when we have spun the drum for the first time:\n\tif something (called the pick) is in the drum\n\tbegin;\n\t\tsay &quot;[The pick] it is, then. &quot;;\n\t\ttry taking the pick;\n\t\tif the pick is the ticket of pure gold, end the game in victory;\n\t\totherwise end the game saying &quot;Oh well, better luck next time.&quot;;\n\tend if.\n\n')"><img border=0 src=paste.png></a> &quot;Wonka's Revenge&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Caribou Lodge is a room. &quot;Hundreds of expectant faces are turned your way from every table.&quot; A lottery drum is in the Lodge. &quot;Before you is the lottery drum[if we have spun the drum], ready to disgorge a ticket[otherwise], waiting to be spun[end if].&quot; In the drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket, and a ticket of pure gold. The drum is closed and openable.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;spin [something]&quot; as spinning.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Spinning is an action with past participle spun, applying to one thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check spinning: if the noun is an open container which contains something, say &quot;[The list of things in the noun] would fly out.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out spinning a container:
<br>&nbsp;&nbsp;&nbsp;&nbsp;shuffle the contents of the noun.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report spinning:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun contains something, say &quot;You rattle [if the container is transparent][the list of things in the container][otherwise]the stuff[end if] in [the noun].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise say &quot;Nothing results of your shaking [the noun].&quot;
</font></blockquote><p>
<p>
<p>Inform keeps track of the order in which things have been put into a container. If we want to change that order without the player's intervention, we can move the things ourselves.
<p>
<blockquote><font color="#000080">To shuffle the contents of (basket - a container):
<br>&nbsp;&nbsp;&nbsp;&nbsp;let moves be the number of things in the basket;
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with counter running from 1 to moves
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move a random thing in the basket to the basket;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end repeat.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">After opening the drum when we have spun the drum for the first time:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if something (called the pick) is in the drum
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The pick] it is, then. &quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try taking the pick;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if the pick is the ticket of pure gold, end the game in victory;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;otherwise end the game saying &quot;Oh well, better luck next time.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if.
</font></blockquote><p>
</td></tr></table><p><p><hr><p><a href=doc143.html>Previous</a> / <a href=doc145.html>Next</a> / <a href=../index.html>Contents</a><p></font></body></html>
