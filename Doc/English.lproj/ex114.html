<html><head><title>11.16. Changing visibility</title></head>
<body><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<table><tr width="100%"><td width=80 valign="top"><a href=doc167.html border=0><img border=0 src=../Back.tif border=0></a><a href=../index.html border=0><img border=0 src=../Home.png border=0></a><a href=doc169.html border=0><img border=0 src=../Forward.tif border=0></a></td><td valign="top"><b>11.16. Changing visibility</b></td></tr></table><p>
<p>
<p>Ordinarily, Inform has a simple model for visibility: it is either fully light or it is fully dark, and certain actions are impossible in the dark, such as examining something. If an action is tried which was defined as requiring light, Inform consults the visibility rules to see if it can go ahead. By default, there is only one visibility rule, which says &quot;yes&quot; in the light and &quot;no&quot; in darkness. Here, though, we create another one:
<p>
<blockquote><font color="#000080">Visibility rule when in darkness:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if examining the book begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You have to squint. Still...&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there is sufficient light;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;there is insufficient light.
</font></blockquote><p>
<p>
<p>A visibility rule must always conclude &quot;there is sufficient light&quot;, or &quot;there is insufficient light&quot;, or else do nothing and leave it to other rules to decide.
<p>
<p>It is a possibly unexpected fact that &quot;looking&quot; does not require light, but instead behaves differently in darkness - it prints a pseudo-room-description such as
<p>
<blockquote><font color="#000080"><b>Darkness</b>
<br>It is pitch dark, and you can't see a thing.
</font></blockquote><p>
<p>
<p>instead of printing the description of the player's current room. This means that the &quot;looking&quot; action is unaffected by visibility rules. All the same, what &quot;looking&quot; does in the dark can be changed by using the two activities &quot;printing the name of a dark room&quot; and &quot;printing the description of a dark room&quot; (see the Activities chapter for details).
<p>
<p><hr><p>
<table border=0 bgcolor="#e0e0e0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a name="e114"><a href=doc168.html#e114><img border=0 src=../FlipOpen.png></a> <font color="#800000"><b>Example</b> (*).</font> <i>Visibility set so that looking under objects produces no result unless the player has a light source to shine there (regardless of the light level of the room).</i><p>
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('&quot;Flashlight&quot;\n\nThe Schoolhouse is a room. &quot;Though normally comfortable, the room is dark and menacing during the storm; rain sheets on the windows, and you can barely see the flash of the lighthouse only a few miles away.&quot;\n\nThe cabinet is a fixed in place openable container in the Schoolhouse. The hurricane lantern is a thing in the Schoolhouse. &quot;A hurricane lantern hangs from a peg.&quot; The lantern is lit.\n\nVisibility rule when looking under something:\n\tif the player is carrying a lit thing (called lamp)\n\tbegin;\n\t\tsay &quot;You shine [the lamp] under [the noun]...&quot;;\n\t\tthere is sufficient light;\n\tend if;\n\tthere is insufficient light.\n\nThe marble is a thing. The marble can be found or lost. The marble is lost.\n\nInstead of looking under the cabinet when the marble is lost:\n\tmove the marble to the player;\n\tnow the marble is found;\n\tsay &quot;Billy\'s lost marble! So that\'s where it got to!&quot;\n\n\n')"><img border=0 src=paste.png></a> &quot;Flashlight&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Schoolhouse is a room. &quot;Though normally comfortable, the room is dark and menacing during the storm; rain sheets on the windows, and you can barely see the flash of the lighthouse only a few miles away.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The cabinet is a fixed in place openable container in the Schoolhouse. The hurricane lantern is a thing in the Schoolhouse. &quot;A hurricane lantern hangs from a peg.&quot; The lantern is lit.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Visibility rule when looking under something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the player is carrying a lit thing (called lamp)
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You shine [the lamp] under [the noun]...&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there is sufficient light;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;there is insufficient light.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The marble is a thing. The marble can be found or lost. The marble is lost.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of looking under the cabinet when the marble is lost:
<br>&nbsp;&nbsp;&nbsp;&nbsp;move the marble to the player;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the marble is found;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;Billy's lost marble! So that's where it got to!&quot;
</font></blockquote><p>
<p>
<p>Because visibility is checked before instead rules, this discovery will (correctly) occur only when the player does have enough light.
</td></tr></table><p><p><hr><p><a href=doc167.html>Previous</a> / <a href=doc169.html>Next</a> / <a href=../index.html>Contents</a><p></font></body></html>
