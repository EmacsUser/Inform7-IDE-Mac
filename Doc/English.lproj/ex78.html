<html><head><title>10.12. New conditions, new adjectives</title></head>
<body><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<table><tr><td><a href=doc148.html border=0><img border=0 src=../Back.tif border=0></a><a href=../index.html border=0><img border=0 src=../Home.png border=0></a><a href=doc150.html border=0><img border=0 src=../Forward.tif border=0></a></td><td><b>10.12. New conditions, new adjectives</b></td></tr></table><p>
<p>
<p>We can create new conditions by defining a phrase with &quot;to decide whether&quot; (or equivalently &quot;to decide if&quot;):
<p>
<blockquote><font color="#000080">To decide whether danger lurks:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if in darkness then yes;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the Control Room has been visited then no;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise yes.
</font></blockquote><p>
<p>
<p>As can be seen, such a phrase must always resolve itself with &quot;yes&quot; or &quot;no&quot;: the first to be reached will be the answer. We can now write, for instance,
<p>
<blockquote><font color="#000080">if danger lurks then ...
</font></blockquote><p>
<p>
<p>In fact, &quot;danger lurks&quot; is now a condition as good as any other, and can be used wherever a condition would be given. Rules can apply only &quot;when danger lurks&quot;, for instance.
<p>
<p>We can also supply definitions of adjectives like this. So far, new adjectives have been defined like so:
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('Definition: a supporter is occupied if it is described and something is on it.\n\n\n')"><img border=0 src=paste.png></a> Definition: a supporter is occupied if it is described and something is on it.
</font></blockquote><p>
<p>
<p>If we want to give a definition which involves more complex logic, we can use a special form allowing us to make arbitrary decisions. In this longer format, the same definition would look like so:
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('Definition: a supporter is occupied:\n\tif it is undescribed then no;\n\tif something is on it then yes;\n\totherwise no.\n\n\n')"><img border=0 src=paste.png></a> Definition: a supporter is occupied:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is undescribed then no;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if something is on it then yes;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise no.
</font></blockquote><p>
<p>
<p>Here &quot;it&quot; refers to the supporter in question. Note that there are now two colons in this sentence, one after &quot;Definition&quot;, the other after the clause being defined. But that apart, it's a phrase like any other: it must end in &quot;yes&quot; or &quot;no&quot; just as the &quot;danger lurks&quot; example must.
<p>
<p><hr><p>
<table border=0 bgcolor="#e0e0e0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a name="e78"><a href=doc149.html#e78><img border=0 src=../FlipOpen.png></a> <font color="#800000"><b>Example</b> (***).</font> <i>OUT always means "move to an outdoors room, or else to a room with more exits than this one has"; IN always means the opposite.</i><p>
<p>
<p>Suppose we want the game to interpret &quot;GO OUT&quot; as &quot;move towards an outdoors room, or towards a room with more exits than the current room&quot;, while &quot;GO IN&quot; means &quot;move toward a room with fewer exits, or towards an indoors room&quot;. Thus going in repeatedly within a building would lead towards dead-ends, while going out repeatedly would lead towards the center of the building and then towards an exit to the outside world.
<p>
<p>We start by encoding these rules as definitions:
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('&quot;Owen\'s Law&quot;\n\nA room can be indoors or outdoors. A room is usually indoors.\n\nDefinition: a room is outward:\n\tif it is not adjacent then no;\n\tif it is indoors and the location is outdoors then no;\n\tif it is outdoors and the location is indoors then yes;\n\tif the number of rooms adjacent to it is greater than the number of rooms adjacent to the location then yes;\n\totherwise no.\n\nDefinition: a room is inward:\n\tif it is not adjacent then no;\n\tif it is outdoors and the location is indoors then no;\n\tif it is indoors and the location is outdoors then yes;\n\tif the number of rooms adjacent to it is less than the number of rooms adjacent to the location then yes;\n\totherwise no.\n\nInstead of going nowhere when the noun is outside: try exiting.\n\nInstead of exiting when the player is in a room:\n\tif at least one room is outward\n\tbegin;\n\t\tlet the destination be a random outward room;\n\t\tlet the way be the best route from the location to\t the destination;\n\t\tsay &quot;(that is, [way])[line break]&quot;;\n\t\ttry going the way instead;\n\totherwise;\n\t\tsay &quot;It\'s not entirely obvious which way you mean. &quot;;\n\t\tcarry out the listing available exits activity;\n\tend if.\n\nInstead of going inside when the room inside from the location is not a room and at least one room is inward:\n\tif more than one room is inward\n\tbegin;\n\t\tcarry out the listing available exits activity;\n\totherwise;\n\t\tlet the destination be a random inward room;\n\t\tlet the way be the best route from the location to the destination;\n\t\tsay &quot;(that is, [way])[line break]&quot;;\n\t\ttry going the way instead;\n\tend if.\n\nInstead of going nowhere:\n\tcarry out the listing available exits activity.\n\n[This &quot;listing available exits&quot; is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:]\n\nListing available exits is an activity.\n\nRule for listing available exits:\n\tif going inside and an adjacent room is inward\n\tbegin;\n\t\tsay &quot;From here \'in\' could reasonably mean [list of adjacent inward rooms].&quot;;\n\t\trule succeeds;\n\tend if;\n\tif exiting and an adjacent room is outward\n\tbegin;\n\t\tsay &quot;From here \'out\' could reasonably mean [list of outward adjacent rooms].&quot;;\n\t\trule succeeds;\n\tend if;\n\tsay &quot;From here you can go [list of adjacent rooms].&quot;;\n\nBefore printing the name of a room (called the target) while listing available exits:\n\tlet aim be the best route from the location to the target;\n\tsay &quot;[aim] to the &quot;.\n\nRule for printing the name of an unvisited room which is not the location:\n\tsay &quot;unknown location&quot;.\n\nDune is an outdoors room. &quot;Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.&quot;\n\nOcean Shores Military Installation is east of the Dune. It is an outdoors room. &quot;The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.&quot;\n\nWalkway is above Ocean Shores Military Installation. &quot;From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.&quot;\n\nDark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually &quot;It is dark in here, and feels unsafe.&quot;\n\n')"><img border=0 src=paste.png></a> &quot;Owen's Law&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A room can be indoors or outdoors. A room is usually indoors.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Definition: a room is outward:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is not adjacent then no;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is indoors and the location is outdoors then no;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is outdoors and the location is indoors then yes;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the number of rooms adjacent to it is greater than the number of rooms adjacent to the location then yes;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise no.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Definition: a room is inward:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is not adjacent then no;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is outdoors and the location is indoors then no;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if it is indoors and the location is outdoors then yes;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the number of rooms adjacent to it is less than the number of rooms adjacent to the location then yes;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise no.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of going nowhere when the noun is outside: try exiting.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of exiting when the player is in a room:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if at least one room is outward
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let the destination be a random outward room;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let the way be the best route from the location to	 the destination;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;(that is, [way])[line break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try going the way instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;It's not entirely obvious which way you mean. &quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carry out the listing available exits activity;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of going inside when the room inside from the location is not a room and at least one room is inward:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if more than one room is inward
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carry out the listing available exits activity;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let the destination be a random inward room;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let the way be the best route from the location to the destination;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;(that is, [way])[line break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try going the way instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of going nowhere:
<br>&nbsp;&nbsp;&nbsp;&nbsp;carry out the listing available exits activity.
</font></blockquote><p>
<p>
<p>This &quot;listing available exits&quot; is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:
<p>
<blockquote><font color="#000080">Listing available exits is an activity.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Rule for listing available exits:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if going inside and an adjacent room is inward
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;From here 'in' could reasonably mean [list of adjacent inward rooms].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rule succeeds;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if exiting and an adjacent room is outward
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;From here 'out' could reasonably mean [list of outward adjacent rooms].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rule succeeds;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;From here you can go [list of adjacent rooms].&quot;;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Before printing the name of a room (called the target) while listing available exits:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let aim be the best route from the location to the target;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[aim] to the &quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Rule for printing the name of an unvisited room which is not the location:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;unknown location&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Dune is an outdoors room. &quot;Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Ocean Shores Military Installation is east of the Dune. It is an outdoors room. &quot;The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Walkway is above Ocean Shores Military Installation. &quot;From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Dark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually &quot;It is dark in here, and feels unsafe.&quot;
</font></blockquote><p>
</td></tr></table><p><p><hr><p><a href=doc148.html>Previous</a> / <a href=doc150.html>Next</a> / <a href=../index.html>Contents</a><p></font></body></html>
