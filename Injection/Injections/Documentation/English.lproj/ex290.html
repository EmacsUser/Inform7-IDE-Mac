<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>14.9. The parts of a number specification</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../../doc_images/ovoid.png');
color:white;
}
-->
</STYLE>
<body>
<!-- SEARCH TITLE "Zqlran Era 8" -->
<!-- SEARCH SECTION "Ex 190" -->
<!-- SEARCH SORT "Ex 014-009-190" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc211.html border=0><img border=0 src=../../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap14.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 14: Units</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc213.html border=0><img border=0 src=../../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>14.9. The parts of a number specification</b></font></td></tr></table>
<p>
<p>We often need to break up a number specification into its pieces. For instance, suppose we want to know the dollars part of $1.99? We can do this by naming the parts:
<p>
<blockquote><font color="#000080">A monetary value is a kind of value. $1.99 specifies a monetary value with parts dollars and cents.
</font></blockquote><p>
<p>
<p>We can now find the relevant parts like so. Suppose that &quot;sum&quot; is a monetary value. Then:
<p>
<blockquote><font color="#000080">dollars part of sum
<br>cents part of sum
</font></blockquote><p>
<p>
<p>are both numbers, so for instance we can
<p>
<blockquote><font color="#000080">say &quot;Looks like around [dollars part of sum in words] dollar[s].&quot;
</font></blockquote><p>
<p>
<p>We can also go the other way:
<p>
<blockquote><font color="#000080">monetary value with dollars part 4 cents part 72
</font></blockquote><p>
<p>
<p>produces the monetary value $4.72. (Note the lack of commas or &quot;and&quot;s, and that the parts have to be given in the right order.) This is really intended to be useful when we manipulate such values in unusual ways:
<p>
<blockquote><font color="#000080">An aspect ratio is a kind of value. 16:20 specifies an aspect ratio with parts width and height.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To decide which aspect ratio is the wider version of (AR - an aspect ratio):
<br>&nbsp;&nbsp;&nbsp;&nbsp;let W be the width part of AR multiplied by 2;
<br>&nbsp;&nbsp;&nbsp;&nbsp;let H be the height part of AR;
<br>&nbsp;&nbsp;&nbsp;&nbsp;let the wider ratio be the aspect ratio with width part W height part H;
<br>&nbsp;&nbsp;&nbsp;&nbsp;decide on the wider ratio.
</font></blockquote><p>
<p>
<p>Declaring the parts of a number specification individually also enables us to tack one or more options onto any of the parts:
<p>
<blockquote><font color="#000080">A monetary value is a kind of value. $1.99 specifies a monetary value with parts dollars and cents (optional, preamble optional).
</font></blockquote><p>
<p>
<p>This declares that the &quot;cents&quot; part is optional - it will be 0 if not specified - and that if omitted, the non-numeric &quot;preamble&quot; before it should also be omitted. Thus &quot;$3&quot; is now valid and equivalent to &quot;$3.00&quot;: indeed it will be the preferred form when Inform prints out a monetary value which is an exact number of dollars. If we had said that &quot;cents&quot; was optional, but not said that the preamble was optional, then &quot;$3.&quot; would have been the form - which is less satisfactory.
<p>
<p>There is only one other option: &quot;without leading zeros&quot;, as in the following.
<p>
<blockquote><font color="#000080">An aspect ratio is a kind of value. 16:20 specifies an aspect ratio with parts width and height (without leading zeros).
</font></blockquote><p>
<p>
<p>This ensures that when the ratio 4:3 is printed, it will be printed as &quot;4:3&quot; and not &quot;4:03&quot; as would otherwise happen.
<p>
<p><hr><p>
<!-- EXAMPLE START -->
<a name="e290"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc212.html#e290 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>190</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><a href=doc212.html#e290 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" src='../../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" src='../../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Zqlran Era 8</font></b></a><br>Creating an alternative system of time for our game, using new units.<p></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2>
<p>
<p>Suppose that our game takes place on an alien planet that does not follow Earth time. On this planet, we want to track time with different units. We also want time to advance in those units, and we want to be able to set a schedule of timed events.
<p>
<blockquote><font color="#000080"><a href="javascript:pasteCode('&quot;Zqlran Era 8&quot;\n\nThe Barren Lavender Surface of Zql is a room. &quot;It is late twilight on Zql. Overhead, two crescent moons, both green, mark the sluggish passage of time. A cold wind is blowing over the pale purplish ground cover, but it does not penetrate your airtight suit.&quot;\n\nA Zqlran date is a kind of value. 14-88 specifies a Zqlran date with parts zqls and frbs. Current zqlran date is a zqlran date that varies. The current zqlran date is 8-22. Previous zqlran date is a zqlran date that varies. The previous zqlran date is 8-20.\n\nWhen play begins:\n\tchange left hand status line to &quot;[current zqlran date], or [current zqlran date in words]&quot;.\n\nTo say (Zqlra - a Zqlran date) in words:\n\tsay &quot;[zqls part of Zqlra] Z, [frbs part of Zqlra] f.&quot;\n\n[Inform automatically supplies a way to say a new unit, which will look similar to the format in which we defined that unit in the first place. But we can (as shown here) create our own alternative say phrases to express the units in other ways as well.]\n\n[Next, we need to meddle with time advancement so that time is tracked in Zqlran date rather than in minutes. This requires borrowing a trick from a later chapter, to replace Inform\'s built-in time handling with an alternative time handling rule of our own:]\n\nProcedural rule:\n\tsubstitute the Zqlran time rule for the advance time rule.\n\nThis is the Zqlran time rule:\n\tincrease turn count by 1;\n\tchange the previous zqlran date to current zqlran date;\n\tchange the current zqlran date to current zqlran date + 0-02;\n\trepeat through the Table of Zql Schedule\n\tbegin;\n\t\tif era entry is greater than previous zqlran date and era entry is not greater than current zqlran date\n\t\tbegin;\n\t\t\tsay event entry;\n\t\t\tsay paragraph break;\n\t\t\tblank out the whole row;\n\t\tend if;\n\tend repeat.\n\nTable of Zql Schedule\nera\tevent\n8-24\t&quot;A wisp-thin cloud blows rapidly across the face of Nepenthe, the lesser of the two green moons.&quot;\n8-28\t&quot;The cloud across Nepenthe clears.&quot;\n\n\n')"><img border=0 src=../../doc_images/paste.png></a> &quot;Zqlran Era 8&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Barren Lavender Surface of Zql is a room. &quot;It is late twilight on Zql. Overhead, two crescent moons, both green, mark the sluggish passage of time. A cold wind is blowing over the pale purplish ground cover, but it does not penetrate your airtight suit.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A Zqlran date is a kind of value. 14-88 specifies a Zqlran date with parts zqls and frbs. Current zqlran date is a zqlran date that varies. The current zqlran date is 8-22. Previous zqlran date is a zqlran date that varies. The previous zqlran date is 8-20.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change left hand status line to &quot;[current zqlran date], or [current zqlran date in words]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To say (Zqlra - a Zqlran date) in words:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[zqls part of Zqlra] Z, [frbs part of Zqlra] f.&quot;
</font></blockquote><p>
<p>
<p>Inform automatically supplies a way to say a new unit, which will look similar to the format in which we defined that unit in the first place. But we can (as shown here) create our own alternative say phrases to express the units in other ways as well.
<p>
<p>Next, we need to meddle with time advancement so that time is tracked in Zqlran date rather than in minutes. This requires borrowing a trick from a later chapter, to replace Inform's built-in time handling with an alternative time handling rule of our own:
<p>
<blockquote><font color="#000080">Procedural rule:
<br>&nbsp;&nbsp;&nbsp;&nbsp;substitute the Zqlran time rule for the advance time rule.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">This is the Zqlran time rule:
<br>&nbsp;&nbsp;&nbsp;&nbsp;increase turn count by 1;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the previous zqlran date to current zqlran date;
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the current zqlran date to current zqlran date + 0-02;
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat through the Table of Zql Schedule
<br>&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if era entry is greater than previous zqlran date and era entry is not greater than current zqlran date
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say event entry;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say paragraph break;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blank out the whole row;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end if;
<br>&nbsp;&nbsp;&nbsp;&nbsp;end repeat.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Zql Schedule
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">era</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">event</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">8-24</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;A wisp-thin cloud blows rapidly across the face of Nepenthe, the lesser of the two green moons.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">8-28</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2 color="#000080">&quot;The cloud across Nepenthe clears.&quot;</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>Note that we could if we wished use a different device for scheduling events: this one simply prints text at scheduled eras, but we might also (for instance) make the event entry be a rule for Inform to follow, and tell Inform to carry out that rule at the scheduled time.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc212.html><img src=../../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../recipes.html><img src=../../doc_images/Hookrecipe.png id="hookrecipe" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../examples.html><img src=../../doc_images/Hookindex.png id="hookindex" style="height: 17px; width: 17px;" border="0"></a></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc211.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc213.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
