<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2.13. Bumping into limits</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../../doc_images/ovoid.png');
color:white;
}
-->
</STYLE>
<body>
<!-- SEARCH TITLE "Bumping into limits" -->
<!-- SEARCH SECTION "2.13" -->
<!-- SEARCH SORT "002-013-000" -->
<font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc22.html border=0><img border=0 src=../../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap2.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 2: The Source Text</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc24.html border=0><img border=0 src=../../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>2.13. Bumping into limits</b></font></td></tr></table>
<p>
<p>No computer has unlimited capacity, and a large, complex project may eventually bump its head against the ceiling.
<p>
<p>Inform is a system for translating textual descriptions of interactive fiction into &quot;story files&quot;, which have a highly standardised format and can be played on a wide range of computers, including a few handheld devices. This format is sometimes called Z-code, and is a program for a notional computer called &quot;the Z-machine&quot;. Internally, the Inform application uses a tool called Inform 6 (which was once the entire Inform system) to manufacture the Z-code story file. There are two ways that large projects can run out of space:
<p>
<blockquote><font color="#000080">(a) By exceeding some maximum in Inform 6, or
<br>(b) By exceeding some fundamental limitation of the Z-machine.
</font></blockquote><p>
<p>
<p>In both cases, the Inform application will display a Problems page explaining that the Inform 6 tool has failed to work as intended, and refer us to the &quot;console output&quot; - the text produced by Inform 6 - which is normally ignored, but can be found on the Progress tab of the Errors panel.
<p>
<p>In case (a), Inform 6 will say that a memory setting has been exceeded: it will say what this setting is called (for instance &quot;MAX_ZCODE_SIZE&quot;) and what its current value is (for instance 50000). We can then avoid the problem by adding the following use option into the source text:
<p>
<blockquote><font color="#000080">Use MAX_ZCODE_SIZE of 60000.
</font></blockquote><p>
<p>
<p>And similarly for every other Inform 6 memory setting. (If the source tries to specify the same setting more than once - which is quite possible if extensions are included, with rival ideas - then the highest value is used.)
<p>
<p>It is also possible that Inform 6 will say that the capacity of the version 5 Z-machine has been exceeded: if so, go to the Settings panel for the project and select the version 8 option instead.
<p>
<p>But problem (b) is more serious. The price we pay for running interactive fiction on a highly standard virtual machine, which can fit onto the tiniest handheld device - and which has a history going back to 1979 - is that some limits are absolute. When such limits are exceeded, Inform 6 typically prints the following message:
<p>
<blockquote><font color="#000080">This program has overflowed the maximum readable-memory size of the Z-machine format. See the memory map below: the start of the area marked &quot;above readable memory&quot; must be brought down to $10000 or less.
</font></blockquote><p>
<p>
<p>followed by a tabulation of how the Z-machine's storage has been used, a large but not very useful diagram. The first time one runs into the problem on a large project, it can be postponed, by adding the following to the source:
<p>
<blockquote><font color="#000080">Use memory economy.
</font></blockquote><p>
<p>
<p>(Economy cuts down the verbosity of some of the testing commands, but otherwise subtracts no performance.) Writing this into the source is the equivalent of a diver switching to an emergency oxygen tank: it gives us a generous safety margin, but also tells us that now is the time to wrap things up.
<p>
<p>If we hit the problem again, genuine cuts must be made. As a general rule, the most memory-expensive ingredients of an Inform design are various-to-various relations between large kinds such as &quot;thing&quot; or, if there are many rooms, &quot;room&quot;. Other than that, if a kind has been festooned with new properties and we have created dozens of items of that kind, then we can get a fairly large saving simply by doing without one of those properties; and so on.
<p>
<p>The ultimate memory-saving device, of course, is the one used by book publishers when there are too many pages to bind: to cut the design into two stories, Part I and Part II.
<p>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width=&quot;100%&quot;><tr><TD width=38px valign=top><img border=&quot;0&quot; src=../../doc_images/beta.png id=&quot;betaoval&quot; style=&quot;height:31px; width=40px&quot;></td><td valign=top><font size=2>Inform contains a great deal of ground-work for compiling to a newer virtual machine for IF (called &quot;glulx&quot;) whose capacity is orders of magnitude greater, but glulx support is not yet complete.
<p>
<p></font></td></tr></table><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc22.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc24.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
