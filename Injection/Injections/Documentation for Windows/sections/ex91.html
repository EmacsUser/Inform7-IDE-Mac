<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.9. Check, carry out, report</title></head>
<STYLE TYPE="text/css">
<!--
.oval, .oval TD
{
background-image:url('../doc_images/ovoid.png');
color:white;
}
-->
</STYLE>
<body>
<!-- SEARCH TITLE "Removal" -->
<!-- SEARCH SECTION "Ex 165" -->
<!-- SEARCH SORT "Ex 012-009-165" -->
<font size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href=doc179.html border=0><img border=0 src=../doc_images/Hookleft.png id="hookleft" style="height: 24px; width: 32px;" border=0></a></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><a href=../chap12.html STYLE="text-decoration: none"><font color="#FFFFFF" size=2>Chapter 12: Advanced Actions</font></a></td><TD width=56px height=26px align="right" valign="center"><a href=../index.html border=0><img border=0 src=../doc_images/Hookup.png id="hookup" style="height: 24px; width: 24px;" border=0></a><a href=doc181.html border=0><img border=0 src=../doc_images/Hookright.png id="hookright" style="height: 24px; width: 32px;" border=0></a></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD height=8px halign="center" valign="center"></td></tr></table><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><TD width=38px halign="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#000000" size="3"><b>12.9. Check, carry out, report</b></font></td></tr></table>
<p>
<p>The normal behaviour of an action is specified by its three associated rulebooks - check, carry out and report. In the case of our &quot;photographing&quot; example, these rulebooks will be:
<p>
<blockquote><font color="#000080"><b>Check photographing</b>. Here, for instance, we need to verify that the player has the camera. If any of our checks fail, we should say why and stop the action. If they succeed, we say nothing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080"><b>Carry out photographing</b>. At this stage no further checking is needed (or allowed): the action now definitively takes place. At this point we might, for instance, deduct one from the number of exposures left on the film in the camera, or award the player points for capturing something interesting for posterity. But we should say nothing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080"><b>Report photographing</b>. At this stage no further activity is needed (or allowed): whatever effect the action had, it has happened and is now over. All we can do is to say what has taken place.
</font></blockquote><p>
<p>
<p>So far we have not really gone into the business of what rulebooks are, and we don't do so here either - suffice to say that we can now create whatever rules we need:
<p>
<blockquote><font color="#000080">A check photographing rule: if the camera is not carried then say &quot;You can hardly photograph without a camera, now can you?&quot; instead.
</font></blockquote><p>
<p>
<p>In fact, writing &quot;a check photographing rule&quot; is over-formal. We can more simply label our rules like so:
<p>
<blockquote><font color="#000080">Check photographing: if we have photographed the noun then say &quot;You've already snapped [the noun].&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report photographing: say &quot;Click!&quot;
</font></blockquote><p>
<p>
<p>For the sake of brevity, photography has no interesting consequence (no points to be won, no film to use up), so there are no carry out rules here. Note the way we used the word &quot;instead&quot; once again to stop actions in their tracks.
<p>
<p>We can continue to add rules at any point, and a classic thing that happens when testing a new work is that the designer realises there is a case which has not been thought of:
<p>
<blockquote><font color="#000080">Check photographing: if the noun is the camera then say &quot;That would require some sort of contraption with mirrors.&quot; instead.
</font></blockquote><p>
<p>
<p><hr><p>
<a name="e59"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex59.html#e59 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>162</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=ex59.html#e59 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Waxwork</font></b></a><br>Containers and supporters that report their contents when you EXAMINE them.<p></td></tr></table>
<a name="e78"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex78.html#e78 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>163</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=ex78.html#e78 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> The Dark Ages Revisited</font></b></a><br>An electric light kind of device which becomes lit when switched on and dark when switched off.<p></td></tr></table>
<!-- EXAMPLE START -->
<a name="e91"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=doc180.html#e91 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>164</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=doc180.html#e91 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;<b>Example</b>&nbsp;</font> <font color="#000000"> Removal</font></b></a><br>TAKE expanded to give responses such as "You take the book from the shelf." or "You pick up the toy from the ground."<p></td></tr></table>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font size=2>
<p>
<p>It is sometimes useful to add rules to the check and carry out rulebooks to record information that will be useful later in processing the action. For instance, suppose that we want to change the reporting of &quot;take&quot; so that the player is always told something like &quot;You take the book from the shelf.&quot; or &quot;You pick up the toy from the ground.&quot; In order to generate these reports, we will need to know where the object started, even though by the time we are printing the output, the object will have moved.
<p>
<p>One possibility is to record a previous location during the &quot;carry out&quot; phase of the action, and then refer to it later during the report phase, so:
<p>
<blockquote><font color="#000080"><script language="JavaScript">
function pasteCode258(code) {
    var myProject = external.Project;

    myProject.selectView('source');
    myProject.pasteCode('"Removal"\n\nThe Pharmacy is a room. A desk and a trash can are in the Pharmacy. The pill-counter, a prescription, and a computer are on the desk. The computer is fixed in place. The pill-counter contains some Vicodin. The trash can contains an empty box.\n\nPrevious locale is an object that varies.\n\n[The previous locale could in theory be either a thing or a room, so we make it "an object" -- that is, the most generic possible kind, to which both things and rooms belong. Now we record what the previous locale is at the beginning of each taking action:]\n\nFirst carry out taking rule:\n\tchange the previous locale to the holder of the noun.\n\n[Saying that this is the first carry out taking rule means that it will be used before any other carry out rules, no matter how specific. This means that we will always capture the locale before moving the object in question. For more about the sequencing of rules, and specifying "first" and "last" rules, see Chapter 17.]\n\nReport taking something:\n\tif the previous locale is the location, say "You pick up [the noun] from the ground.";\n\totherwise say "You take [the noun] from [the previous locale].";\n\tstop the action.\n\nTest me with "get all".\n\n');
}
</script>
<a href="javascript:pasteCode258()"><img border=0 src=../doc_images/paste.png></a> &quot;Removal&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Pharmacy is a room. A desk and a trash can are in the Pharmacy. The pill-counter, a prescription, and a computer are on the desk. The computer is fixed in place. The pill-counter contains some Vicodin. The trash can contains an empty box.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Previous locale is an object that varies.
</font></blockquote><p>
<p>
<p>The previous locale could in theory be either a thing or a room, so we make it &quot;an object&quot; -- that is, the most generic possible kind, to which both things and rooms belong. Now we record what the previous locale is at the beginning of each taking action:
<p>
<blockquote><font color="#000080">First carry out taking rule:
<br>&nbsp;&nbsp;&nbsp;&nbsp;change the previous locale to the holder of the noun.
</font></blockquote><p>
<p>
<p>Saying that this is the first carry out taking rule means that it will be used before any other carry out rules, no matter how specific. This means that we will always capture the locale before moving the object in question. For more about the sequencing of rules, and specifying &quot;first&quot; and &quot;last&quot; rules, see Chapter 17.
<p>
<blockquote><font color="#000080">Report taking something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the previous locale is the location, say &quot;You pick up [the noun] from the ground.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise say &quot;You take [the noun] from [the previous locale].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;stop the action.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;get all&quot;.
</font></blockquote><p>
<p>
<p>We &quot;stop the action&quot; here because the report rules are followed in order, and unless we specifically stop, Inform will go on to the default report taking rule, giving us output like
<p>
<blockquote><font color="#000080">You take the box from the freezer.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Taken.
</font></blockquote><p>
<p>
<p>This is obviously undesirable. We could also say
<p>
<blockquote><font color="#000080">Report taking something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the previous locale is the location, say &quot;You pick up [the noun] from the ground.&quot; instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise say &quot;You take [the noun] from [the previous locale].&quot; instead.
</font></blockquote><p>
<p>
<p>Including &quot;instead&quot; at the end of a say phrase stops the action after the phrase is printed.
<table CELLPADDING=0 CELLSPACING=0 width="100%" height=18><tr><td width="100%"> </td><td width=18 align="left" bgcolor="#000000"><a href=doc180.html><img src=../doc_images/Hookclose.png id="hookclose" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../recipes.html><img src=../doc_images/Hookrecipe.png id="hookrecipe" style="height: 17px; width: 17px;" border="0"></a></td><td width=4></td><td width=18 align="left" bgcolor="#000000"><a href=../examples.html><img src=../doc_images/Hookindex.png id="hookindex" style="height: 17px; width: 17px;" border="0"></a></td></tr></table></td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e66"><table CELLPADDING=0 CELLSPACING=0><tr><td halign="left" valign="top" CELLPADDING=0 CELLSPACING=0 width=38px><TABLE align="left" CELLPADDING=0 CELLSPACING=0><TR CLASS="oval"><TD width=38px height=30px align="left" valign="center"><a href=ex66.html#e66 STYLE="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 4px; padding-bottom: 0pt; padding-top: 4px; text-align: center; color: #202020; font-size: 14px; line-height: 1px;"><b>165</b></div></a></TD></TR></TABLE></td><td CELLPADDING=0 CELLSPACING=0 halign="left" valign="top"><font size=2><a href=ex66.html#e66 STYLE="text-decoration: none"><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><img border="0" style="height: 15px; width: 13px;" alt="*" src='../doc_images/asterisk.png'><b><font color="#505050">&nbsp;Example&nbsp;</font> <font color="#000000"> Paddington</font></b></a><br>A CUT [something] WITH [something] command which acts differently on different types of objects.<p></td></tr></table>
<p><hr><table CELLPADDING=0 CELLSPACING=0 width="100%"><tr><td width="33%" align="left"><a href=doc179.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Previous</font></a></td><td width="33%" align="center"><a href=../index.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Contents</font></a></td><td width="33%" align="right"><a href=doc181.html border=0 STYLE="text-decoration: none"><font color="808080" size="2">Next</font></a></td></tr></table></font></body></html>
