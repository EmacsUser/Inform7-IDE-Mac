Locksmith by Emily Short begins here.Volume 1 - Automatic locking and unlocking with necessary actionsBefore going through a closed door (called the blocking door):	say "(first opening [the blocking door])";	try opening the blocking door;	if the blocking door is closed, stop the action.Before locking an open thing (called the door ajar) with something:	say "(first closing [the door ajar])";	try closing the door ajar;	if the door ajar is open, stop the action.	Before keyless locking an open thing (called the door ajar):	say "(first closing [the door ajar])";	try closing the door ajar;	if the door ajar is open, stop the action.Before opening a locked thing (called the sealed chest): 	say "(first unlocking [the sealed chest])";	try keyless unlocking the sealed chest;	if the sealed chest is locked, stop the action.	Volume 2 - Default locking and unlockingPart 1 - The matching key ruleThis is the need a matching key rule: 	if the noun has a matching key 	begin;		if the matching key of the noun is carried,			continue the action;		find the matching key of the noun;		if the matching key of the noun is carried,			continue the action; 	end if;	say "You lack a key that fits [the noun].";	stop the action.To decide whether (item - a thing) can be seen:	(- (TestScope({item})) -)	To decide whether (item - a thing) rings a bell:	if the item is a passkey	begin;		if the matching lock of the item is a thing,		yes;	end if;	no.	To find the (item - a thing): 		if the item rings a bell		begin;			if the item can be seen			begin;				say "(first taking [the item])";				try taking the item; 			end if; 		end if;Part 2 - Keyless unlockingUnderstand "unlock [something]" as keyless unlocking.Keyless unlocking is an action applying to one thing.Check keyless unlocking:	abide by the can't unlock without a lock rule;	abide by the can't unlock what's already unlocked rule;	abide by the need a matching key rule.Carry out keyless unlocking:	say "(with [the matching key of the noun])";	try unlocking the noun with the matching key of the noun.	 Part 3 - Keyless lockingUnderstand "lock [something]" as keyless locking.Keyless locking is an action applying to one thing.Check keyless locking:	abide by the can't lock without a lock rule;	abide by the can't lock what's already locked rule;	abide by the can't lock what's open rule;	abide by the need a matching key rule.	Carry out keyless locking:	say "(with [the matching key of the noun])";	try locking the noun with the matching key of the noun.		Volume 3 - The Passkey kind, needed only if you want keys to name themselvesA passkey is a kind of thing. A passkey has a property called the matching lock. The specification of a passkey is "A kind of key whose inventorylisting changes to reflect the player's knowledge about whatit unlocks."The inventory listing of a passkey is "[a this object][if the matchinglock is a thing] (which opens [the matching lock])[end if]";After unlocking something (called the padlock) with a passkey (called the skeleton):	change the matching lock of the skeleton to the padlock;	continue the action.Volume 4 - Unlocking all - Not for releaseUnderstand "unlockall" as universal unlocking.Universal unlocking is an action applying to nothing.Carry out universal unlocking:	repeat with item running through locked things	begin;		change item to unlocked;		say "Unlocking [the item].";	end repeat.Report universal unlocking:	say "A loud stereophonic click assures you that everything in the	game has been unlocked."Locksmith ends here.<Documentation>Locksmith adds implicit handling of doors and containers so that lock manipulation is automatic if the player has the necessary keys.  There are four parts of Locksmith.First, Locksmith will try opening all doors the player tries to pass through; try closing all lockables before locking them; and try unlocking all locked items before opening them.  Second, Locksmith tries to provide an intelligent default if no key is specified, so that >LOCK DOOR will work if the player is holding the correct key. Third, Locksmith introduces a kind called the passkey.  The passkey is a key which will name itself in inventory listings after use, so:+	You are carrying:+		a grey key (which opens the silver door)if we have written:+	The grey key is a passkey.Once the passkey has been used, the game also automates taking the key before using it on the door it matches.  Keys the player has never successfully used, or keys not defined as belonging to the passkey kind, will not behave this way.Finally, Locksmith provides the debugging verb 'unlockall', only used in debugging compilations of the game.  If during play we type UNLOCKALL, all locks in the game will magically spring open.